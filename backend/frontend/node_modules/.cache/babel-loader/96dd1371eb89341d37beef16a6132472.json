{"ast":null,"code":"import _toConsumableArray from\"/Users/hariharan/Desktop/test project copy/backend/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from\"react\";import{Link}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{Row,Col,ListGroup,Image,Form,Button,Card}from\"react-bootstrap\";import Message from\"../Message\";import{addToCart,removeFromCart}from\"../../actions/cartActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CartScreen(_ref){var match=_ref.match,location=_ref.location,history=_ref.history;var productId=match.params.id;var qty=location.search?Number(location.search.split(\"=\")[1]):1;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){history.push(\"/login?redirect=end\");};useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:10,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"CART\"}),cartItems.length===0?/*#__PURE__*/_jsxs(\"h3\",{children:[\" \",/*#__PURE__*/_jsxs(Message,{variant:\"info\",children:[\"Your cart is empty\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn btn-light my-3\",children:\"Go Back\"})]})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,as:\"h3\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,as:\"h3\",children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") items\"]}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-inr\"}),\"\\xA0\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})]});}export default CartScreen;","map":{"version":3,"names":["React","useEffect","Link","useDispatch","useSelector","Row","Col","ListGroup","Image","Form","Button","Card","Message","addToCart","removeFromCart","CartScreen","match","location","history","productId","params","id","qty","search","Number","split","dispatch","cart","state","cartItems","removeFromCartHandler","checkoutHandler","push","length","map","item","image","name","product","price","e","target","value","Array","countInStock","keys","x","reduce","acc","toFixed"],"sources":["/Users/hariharan/Desktop/test project copy/backend/frontend/src/components/Screens/CartScreen.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  Row,\n  Col,\n  ListGroup,\n  Image,\n  Form,\n  Button,\n  Card,\n} from \"react-bootstrap\";\nimport Message from \"../Message\";\nimport { addToCart, removeFromCart } from \"../../actions/cartActions\";\n\nfunction CartScreen({ match, location, history }) {\n  const productId = match.params.id;\n  const qty = location.search ? Number(location.search.split(\"=\")[1]) : 1;\n\n  const dispatch = useDispatch();\n  const cart = useSelector((state) => state.cart);\n  const { cartItems } = cart;\n  \n  const removeFromCartHandler = (id) => {\n    dispatch(removeFromCart(id));\n  };\n  const checkoutHandler = () => {\n    history.push(\"/login?redirect=end\");\n  };\n\n  useEffect(() => {\n    if (productId) {\n      dispatch(addToCart(productId, qty));\n    }\n  }, [dispatch, productId, qty]);\n\n  return (\n    <Row>\n      <Col md={10}>\n        <h1>CART</h1>\n        {cartItems.length === 0 ? (\n          <h3>\n            {\" \"}\n            <Message variant=\"info\">\n              Your cart is empty{\" \"}\n              <Link to=\"/\" className=\"btn btn-light my-3\">\n                Go Back\n              </Link>\n            </Message>\n          </h3>\n        ) : (\n          <ListGroup variant=\"flush\">\n            {cartItems.map((item) => (\n              <ListGroup.Item key={item.product}>\n                <Row>\n                  <Col md={1}>\n                    <Image src={item.image} alt={item.name} fluid rounded />\n                  </Col>\n                  <Col md={3} as=\"h3\">\n                    <Link to={`/product/${item.product}`}>{item.name}</Link>\n                  </Col>\n\n                  <Col md={2} as=\"h3\">\n                    ${item.price}\n                  </Col>\n\n                  <Col md={3}>\n                    <Form.Control\n                      as=\"select\"\n                      value={item.qty}\n                      onChange={(e) =>\n                        dispatch(\n                          addToCart(item.product, Number(e.target.value))\n                        )\n                      }\n                    >\n                      {[...Array(item.countInStock).keys()].map((x) => (\n                        <option key={x + 1} value={x + 1}>\n                          {x + 1}\n                        </option>\n                      ))}\n                    </Form.Control>\n                  </Col>\n\n                  <Col md={1}>\n                    <Button\n                      type=\"button\"\n                      variant=\"light\"\n                      onClick={() => removeFromCartHandler(item.product)}\n                    >\n                      <i className=\"fas fa-trash\"></i>\n                    </Button>\n                  </Col>\n                </Row>\n              </ListGroup.Item>\n            ))}\n          </ListGroup>\n        )}\n      </Col>\n      <Col md={2}>\n        <Card>\n          <ListGroup variant=\"flush\">\n            <ListGroup.Item>\n              <h2>\n                Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)})\n                items\n              </h2>\n              <i className=\"fas fa-inr\"></i>&nbsp;\n              {cartItems\n                .reduce((acc, item) => acc + item.qty * item.price, 0)\n                .toFixed(2)}\n            </ListGroup.Item>\n          </ListGroup>\n          <ListGroup.Item>\n            <Button\n              type=\"button\"\n              className=\"btn-block\"\n              disabled={cartItems.length === 0}\n              onClick={checkoutHandler}\n            >\n              Proceed To Checkout\n            </Button>\n          </ListGroup.Item>\n        </Card>\n      </Col>\n    </Row>\n  );\n}\n\nexport default CartScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}